<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sidekick ‚Äì Project View (Popup)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .active-tab { background-color: #44A380 !important; color: #FFFFFF !important; }
    .active-tab svg { color: #FFFFFF !important; }
  </style>
</head>
<body class="flex min-h-screen bg-[#F4E4C2]">

  <!-- Left Sidebar -->
  <aside class="w-20 bg-[#348F6C] text-white flex flex-col items-center py-5 space-y-6">
    <button class="icon-btn active-tab" data-id="Home">
      üè†
    </button>
    <button class="icon-btn" data-id="Projects">üìÅ</button>
    <button class="icon-btn" data-id="Settings">‚öôÔ∏è</button>
  </aside>

  <!-- Middle Panel -->
  <section id="project-list" class="w-64 bg-[#3C9F7A] text-white px-4 py-6 hidden flex-col space-y-4">
    <div class="flex justify-between items-center mb-2">
      <h2 class="text-xs uppercase text-[#F4E4C2] font-semibold">Projects</h2>
      <button id="open-modal" class="text-[#F4E4C2] text-base hover:text-white">+</button>
    </div>
    <div id="projects" class="flex flex-col space-y-2">
      <button class="hover:underline text-left project-item">Project Alpha</button>
      <button class="hover:underline text-left project-item">Project Beta</button>
    </div>
  </section>

  <!-- Main Panel -->
  <main id="main-panel" class="flex-1 bg-white p-10 overflow-y-auto">
    <div id="default-view" class="space-y-4">
      <h1 class="text-2xl font-semibold text-gray-800">Welcome</h1>
      <p class="text-gray-500">This is the blank state for now.</p>
    </div>

    <div id="project-view" class="hidden space-y-8">
      <h2 id="project-title" class="text-xl font-semibold text-[#348F6C]">Project Name</h2>
      <div class="bg-gray-100 rounded-xl p-4 shadow-sm">
        <input type="text" placeholder="New chat in this project..." class="w-full p-3 rounded-xl bg-white border border-gray-300 focus:outline-none focus:ring" />
      </div>
    </div>
  </main>

  <!-- Modal -->
  <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
    <div class="bg-white rounded-xl p-6 w-80 shadow-lg">
      <h2 class="text-lg font-semibold text-gray-800 mb-2">New Project</h2>
      <input type="text" id="modal-project-name" placeholder="Project Name" class="w-full p-2 border rounded mb-4">
      <div class="flex justify-end space-x-2">
        <button id="cancel-modal" class="text-gray-500 hover:underline">Cancel</button>
        <button id="create-modal-project" class="bg-[#348F6C] text-white px-3 py-1 rounded hover:bg-[#2b7456]">Create</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const icons = document.querySelectorAll(".icon-btn");
      const projectPanel = document.getElementById("project-list");
      const openModal = document.getElementById("open-modal");
      const modal = document.getElementById("modal");
      const modalInput = document.getElementById("modal-project-name");
      const cancelModal = document.getElementById("cancel-modal");
      const createModalBtn = document.getElementById("create-modal-project");
      const projectList = document.getElementById("projects");
      const defaultView = document.getElementById("default-view");
      const projectView = document.getElementById("project-view");
      const projectTitle = document.getElementById("project-title");

      icons.forEach(btn => {
        btn.addEventListener("click", () => {
          icons.forEach(i => i.classList.remove("active-tab"));
          btn.classList.add("active-tab");

          const selected = btn.getAttribute("data-id");
          projectPanel.classList.toggle("hidden", selected !== "Projects");
          defaultView.classList.toggle("hidden", selected === "Projects");
          projectView.classList.add("hidden");
        });
      });

      openModal.addEventListener("click", () => {
        modal.classList.remove("hidden");
        modalInput.value = "";
        modalInput.focus();
      });

      cancelModal.addEventListener("click", () => {
        modal.classList.add("hidden");
      });

      createModalBtn.addEventListener("click", () => {
        const name = modalInput.value.trim();
        if (name) {
          const btn = document.createElement("button");
          btn.textContent = name;
          btn.className = "hover:underline text-left project-item";
          btn.addEventListener("click", () => {
            showProject(name);
          });
          projectList.appendChild(btn);
          modal.classList.add("hidden");
          showProject(name);
        }
      });

      document.querySelectorAll(".project-item").forEach(btn => {
        btn.addEventListener("click", () => {
          showProject(btn.textContent);
        });
      });

      function showProject(name) {

        projectView.classList.remove("hidden");
        projectTitle.textContent = name;
      }

      icons[0].click(); // Default to Home
    });
  </script>
</body>
</html>